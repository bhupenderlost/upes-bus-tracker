{"version":3,"file":"static/js/736.b9521390.chunk.js","mappings":"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","sources":["Components/BackButton/BackButton.jsx","Components/BottomBar/BottomBar.jsx","Components/Base/BaseTwo.jsx","Pages/Location.jsx"],"sourcesContent":["import React from \"react\"\r\nimport { \r\n    ArrowLeftIcon\r\n} from '@heroicons/react/24/solid'\r\n\r\nimport { useNavigate } from \"react-router-dom\"\r\n\r\nconst BackButton = (props) => {\r\n\r\n    const navigate = useNavigate()\r\n    return(\r\n        <div className=\"mt-10 flex flex-row gap-2 ml-2\">\r\n            <div onClick={() => navigate(-1)} className=\"rounded-full bg-white h-[40px] w-[40px] flex flex-col items-center justify-center\">\r\n                <ArrowLeftIcon width={30} height={30}  />\r\n            </div>\r\n            <h2 className=\"text-white text-3xl font-bold\">\r\n                {props.title}\r\n            </h2>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default BackButton","import React from \"react\"\r\nimport { \r\n    HomeIcon, \r\n    TruckIcon, \r\n    UserIcon,\r\n    ArrowLeftEndOnRectangleIcon\r\n} from '@heroicons/react/24/solid'\r\nimport { useLocation, useNavigate } from \"react-router-dom\"\r\nimport { logout } from '../../Helpers/index'\r\n\r\nconst BottomBar = (props) => {\r\n\r\n    const location = useLocation()\r\n    const navigate = useNavigate()\r\n\r\n    const menuItems = [\r\n        {\r\n            title: 'Home',\r\n            icon: <HomeIcon width={30} height={30} className={location.pathname === '/home' ? 'text-black' : 'text-[#0000005f] '} />,\r\n            active: location.pathname === '/home' ? true : false,\r\n            href: '/home'\r\n        },\r\n        {\r\n            title: 'Buses',\r\n            icon: <TruckIcon width={30} height={30} className={location.pathname === '/buses' ? 'text-black' : 'text-[#0000005f]'} />,\r\n            active: location.pathname === '/buses' ? true : false,\r\n            href: '/buses'\r\n        },\r\n        {\r\n            title: 'Profile',\r\n            icon: <UserIcon width={30} height={30} className={location.pathname === '/profile' ? 'text-black' : 'text-[#0000005f]'} />,\r\n            active: location.pathname === '/profile' ? true : false,\r\n            href: '/profile'\r\n        },\r\n        {\r\n            title: 'All',\r\n            icon: <TruckIcon width={30} height={30} className={location.pathname === '/locations' ? 'text-black' : 'text-[#0000005f]'} />,\r\n            active: location.pathname === '/locations' ? true : false,\r\n            href: '/locations'\r\n        },\r\n        {\r\n            title: 'Logout',\r\n            icon: <ArrowLeftEndOnRectangleIcon width={30} height={30} className={location.pathname === '/logout' ? 'text-black' : 'text-[#0000005f]'} />,\r\n            active: location.pathname === '/logout' ? true : false,\r\n            href: '/logout'\r\n        },\r\n    ]\r\n\r\n    const signout = async () => {\r\n        let res = await logout()\r\n        if(res) {\r\n            return navigate('/login')\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"w-screen h-[10%] flex flex-row justify-center gap-12 border-t-2 border-gray-200 shadow\">\r\n            { menuItems.map((item) => {\r\n                return(\r\n                    <div \r\n                        onClick={item.href === '/logout' ? () => signout() : () => navigate(`${item.href}`)} \r\n                        key={item.href} \r\n                        className={`flex flex-col pt-2 items-center ${item.active ? 'border-t-4 border-[#e6106d]' : ''} rounded w-[40px]`}\r\n                    >\r\n                        {item.icon}\r\n                        <p className={item.active ? 'text-black font-semibold' : 'text-[#0000005f]'}>\r\n                            {item.title}\r\n                        </p>      \r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BottomBar","import React from \"react\"\r\nimport Logo from '../../Assets/Media/logo.png'\r\nimport BottomBar from \"../BottomBar/BottomBar\"\r\n\r\nconst BaseTwo = (props) => {\r\n    \r\n    return(\r\n        <div className=\"h-screen w-screen bg-[#0075a1] md:overflow-hidden\">\r\n            <div className=\"flex flex-row justify-between h-1/6 p-2\">\r\n                {props.header}\r\n                <div className=\"h-[40px] \">\r\n                    <img src={Logo} alt=\"UPES Logo\" className=\"h-[50px] -mt-[2px]\" />\r\n                </div>\r\n            </div>\r\n            <div className={`flex flex-col items-center drop-shadow-2xl h-5/6 ${props.style}`}>\r\n                <div className=\"overflow-y-scroll h-[90%]\">\r\n                    {props.children}\r\n                </div>\r\n                <BottomBar />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BaseTwo","import React, { useCallback, useEffect, useState } from \"react\"\r\nimport socketIO from 'socket.io-client'\r\nimport BaseTwo from \"../Components/Base/BaseTwo\"\r\nimport BackButton from \"../Components/BackButton/BackButton\"\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\"\r\nimport config from '../config.json'\r\nimport { getBusById, getToken } from '../Helpers/index'\r\nimport { GoogleMap, MarkerF, useJsApiLoader, DirectionsRenderer, DirectionsService } from '@react-google-maps/api'\r\n\r\n\r\n\r\nconst Location = () => {\r\n\r\n    const [data, setData] = useState(null)\r\n    const [join, setJoin] = useState(false)\r\n    const [position, setPosition] = useState({ lat: 30.3165, lng: 78.0322 })\r\n    const [userPosition, setUserPosition] = useState(null)\r\n    const [points, setPoints] = useState(null)\r\n    const [map, setMap] = useState(null)\r\n\r\n    const [params, setParams] = useSearchParams()\r\n    const navigate = useNavigate()\r\n\r\n    const { isLoaded } = useJsApiLoader({\r\n        id: \"google-map-script\",\r\n        googleMapsApiKey: config.GOOGLE_MAPS_API_KEY\r\n    })\r\n    const mapContainerStyle = {\r\n        width: \"100vw\",\r\n        height: \"65vh\",\r\n    }\r\n\r\n    const center = {\r\n        lat: 30.3165,\r\n        lng: 78.0322,\r\n    }\r\n    const onLoad = useCallback((map) => {\r\n        const bounds = new window.google.maps.LatLngBounds(center)\r\n        map.fitBounds(bounds)\r\n        setMap(map)\r\n\r\n    }, [])\r\n\r\n    const onUnmount = useCallback((map) => {\r\n        setMap(null)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (!params.has('id'))\r\n            return navigate('/buses')\r\n\r\n        getBusById(params.get('id'))\r\n            .then(data => setPoints(data.dbRes.routeLatLng))\r\n            .catch(err => navigate('/buses'))\r\n        const URL = `${window.location.protocol}//${window.location.hostname}/`\r\n\r\n        const socket = socketIO.connect(URL, {\r\n            extraHeaders: {\r\n                'Authorization': `Bearer ${getToken()[2]}`\r\n            }\r\n        })\r\n\r\n        socket.on('connect', () => {\r\n            socket.emit('bus', params.get('id'))\r\n        })\r\n\r\n        socket.on(\"disconnect\", () => {\r\n            setJoin(false)\r\n        })\r\n\r\n        socket.on('joined', (data) => {\r\n            setJoin(true)\r\n        })\r\n\r\n        socket.emit('location', params.get('id'))\r\n\r\n        socket.on('locationsent', (item) => {\r\n            var socketData = JSON.parse(item)\r\n            if (Object.keys(socketData).length !== 0) {\r\n                setData(socketData)\r\n                if (socketData.lastGpsInformation) {\r\n                    let loc = JSON.parse(socketData.lastGpsInformation)\r\n\r\n                    setPosition({ lat: loc.latitude, lng: loc.longitude })\r\n                }\r\n            }\r\n        })\r\n\r\n        if (\"geolocation\" in navigator) {\r\n            navigator.geolocation.getCurrentPosition((position) => {\r\n                setUserPosition([position.coords.latitude, position.coords.longitude])\r\n            })\r\n        } else {\r\n            console.log(\"Geolocation is not available in your browser.\")\r\n        }\r\n\r\n        const interval = setInterval(() => {\r\n\r\n            socket.emit('location', params.get('id'))\r\n\r\n            if (\"geolocation\" in navigator) {\r\n                navigator.geolocation.getCurrentPosition((position) => {\r\n                    setUserPosition([position.coords.latitude, position.coords.longitude]);\r\n                })\r\n            } else {\r\n                console.log(\"Geolocation is not available in your browser.\")\r\n            }\r\n\r\n        }, 5000)\r\n\r\n        return () => {\r\n            socket.disconnect()\r\n            clearInterval(interval)\r\n        }\r\n    }, [navigate, params])\r\n    return (\r\n        <BaseTwo header={<BackButton title={data ? data.routeName : 'Loading...'} />} style=\"bg-white rounded-t-2xl\">\r\n            <div className=\"flex flex-col md:p-2 \">\r\n                <div className=\"flex flex-row flex-wrap gap-1 h-1/3 pt-4 pl-2 md:pl-5\">\r\n                    <p className=\"text-black text-lg\">\r\n                        <strong>Driver Contact: </strong>{data ? data.driverContact : ''}\r\n                    </p>\r\n                    <p className=\"text-black text-lg\">\r\n                        <strong>Last Location: </strong>{data ? JSON.parse(data.lastGpsInformation).address : ''}\r\n                    </p>\r\n                    <p className=\"text-black text-lg\">\r\n                        <strong>RTO: </strong>{data ? data.vehicleRegistration : ''}\r\n                    </p>\r\n                    <p className=\"text-black text-lg\">\r\n                        <strong>State Of Bus: </strong>{data ? JSON.parse(data.lastGpsInformation).statusStr : ''}\r\n                    </p>\r\n                    <p className=\"text-black text-lg\">\r\n                        <strong>Last Updated: </strong>{data ? JSON.parse(data.lastGpsInformation).gpsTimeStr : ''}\r\n                    </p>\r\n                    {!userPosition ? <p className=\"text-sm\">Allow Location To See Your Location As Well.</p> : ''}\r\n                    {join ? <p className=\"text-sm\">Status: Connected</p> : <p className=\"text-sm\">Status: Disconnected</p>}\r\n                </div>\r\n\r\n                {\r\n                    isLoaded ? (\r\n                        <GoogleMap\r\n                            mapContainerStyle={mapContainerStyle}\r\n                            center={position}\r\n                            zoom={10}\r\n                            onLoad={onLoad}\r\n                            onUnmount={onUnmount}\r\n                        >\r\n                            <MarkerF\r\n                                title={`${data ? data.vehicleRegistration : \"\"}`}\r\n                                position={position}\r\n                            />\r\n                           \r\n                        </GoogleMap>\r\n                    ) :\r\n\r\n                        \"Loading...\"\r\n                }\r\n\r\n\r\n            </div>\r\n        </BaseTwo>\r\n    )\r\n}\r\n\r\nexport default Location"],"names":["props","navigate","useNavigate","_jsxs","className","children","_jsx","onClick","ArrowLeftIcon","width","height","title","location","useLocation","menuItems","icon","HomeIcon","pathname","active","href","TruckIcon","UserIcon","ArrowLeftEndOnRectangleIcon","map","item","async","logout","signout","concat","header","src","Logo","alt","style","BottomBar","Location","data","setData","useState","join","setJoin","position","setPosition","lat","lng","userPosition","setUserPosition","points","setPoints","setMap","params","setParams","useSearchParams","isLoaded","useJsApiLoader","id","googleMapsApiKey","config","center","onLoad","useCallback","bounds","window","google","maps","LatLngBounds","fitBounds","onUnmount","useEffect","has","getBusById","get","then","dbRes","routeLatLng","catch","err","URL","protocol","hostname","socket","socketIO","extraHeaders","getToken","on","emit","socketData","JSON","parse","Object","keys","length","lastGpsInformation","loc","latitude","longitude","navigator","geolocation","getCurrentPosition","coords","console","log","interval","setInterval","disconnect","clearInterval","BaseTwo","BackButton","routeName","driverContact","address","vehicleRegistration","statusStr","gpsTimeStr","GoogleMap","mapContainerStyle","zoom","MarkerF"],"sourceRoot":""}