"use strict";(self.webpackChunkgps_react_client=self.webpackChunkgps_react_client||[]).push([[736],{394:(e,t,s)=>{s.d(t,{A:()=>n});s(43);var a=s(455),l=s(216),o=s(579);const n=e=>{const t=(0,l.Zp)();return(0,o.jsxs)("div",{className:"mt-10 flex flex-row gap-2 ml-2",children:[(0,o.jsx)("div",{onClick:()=>t(-1),className:"rounded-full bg-white h-[40px] w-[40px] flex flex-col items-center justify-center",children:(0,o.jsx)(a.A,{width:30,height:30})}),(0,o.jsx)("h2",{className:"text-white text-3xl font-bold",children:e.title})]})}},634:(e,t,s)=>{s.d(t,{A:()=>x});s(43);var a=s(366),l=s(14),o=s(988),n=s(718),i=s(698),c=s(216),r=s(554),d=s(579);const h=e=>{const t=(0,c.zy)(),s=(0,c.Zp)(),a=[{title:"Home",icon:(0,d.jsx)(l.A,{width:30,height:30,className:"/home"===t.pathname?"text-black":"text-[#0000005f] "}),active:"/home"===t.pathname,href:"/home"},{title:"Buses",icon:(0,d.jsx)(o.A,{width:30,height:30,className:"/buses"===t.pathname?"text-black":"text-[#0000005f]"}),active:"/buses"===t.pathname,href:"/buses"},{title:"Profile",icon:(0,d.jsx)(n.A,{width:30,height:30,className:"/profile"===t.pathname?"text-black":"text-[#0000005f]"}),active:"/profile"===t.pathname,href:"/profile"},{title:"All",icon:(0,d.jsx)(o.A,{width:30,height:30,className:"/locations"===t.pathname?"text-black":"text-[#0000005f]"}),active:"/locations"===t.pathname,href:"/locations"},{title:"Logout",icon:(0,d.jsx)(i.A,{width:30,height:30,className:"/logout"===t.pathname?"text-black":"text-[#0000005f]"}),active:"/logout"===t.pathname,href:"/logout"}];return(0,d.jsx)("div",{className:"w-screen h-[10%] flex flex-row justify-center gap-12 border-t-2 border-gray-200 shadow",children:a.map((e=>(0,d.jsxs)("div",{onClick:"/logout"===e.href?()=>(async()=>{if(await(0,r.ri)())return s("/login")})():()=>s("".concat(e.href)),className:"flex flex-col pt-2 items-center ".concat(e.active?"border-t-4 border-[#e6106d]":""," rounded w-[40px]"),children:[e.icon,(0,d.jsx)("p",{className:e.active?"text-black font-semibold":"text-[#0000005f]",children:e.title})]},e.href)))})},x=e=>(0,d.jsxs)("div",{className:"h-screen w-screen bg-[#0075a1] md:overflow-hidden",children:[(0,d.jsxs)("div",{className:"flex flex-row justify-between h-1/6 p-2",children:[e.header,(0,d.jsx)("div",{className:"h-[40px] ",children:(0,d.jsx)("img",{src:a,alt:"UPES Logo",className:"h-[50px] -mt-[2px]"})})]}),(0,d.jsxs)("div",{className:"flex flex-col items-center drop-shadow-2xl h-5/6 ".concat(e.style),children:[(0,d.jsx)("div",{className:"overflow-y-scroll h-[90%]",children:e.children}),(0,d.jsx)(h,{})]})]})},736:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(43),l=s(958),o=s(634),n=s(394),i=s(475),c=s(216),r=s(219),d=s(554),h=s(942),x=s(579);const g=()=>{const[e,t]=(0,a.useState)(null),[s,g]=(0,a.useState)(!1),[m,p]=(0,a.useState)({lat:30.3165,lng:78.0322}),[u,f]=(0,a.useState)(null),[j,b]=(0,a.useState)(null),[v,w]=(0,a.useState)(null),[N,k]=(0,i.ok)(),S=(0,c.Zp)(),{isLoaded:A}=(0,h.KD)({id:"google-map-script",googleMapsApiKey:r.f4}),y={lat:30.3165,lng:78.0322},L=(0,a.useCallback)((e=>{const t=new window.google.maps.LatLngBounds(y);e.fitBounds(t),w(e)}),[]),C=(0,a.useCallback)((e=>{w(null)}),[]);return(0,a.useEffect)((()=>{if(!N.has("id"))return S("/buses");(0,d.JN)(N.get("id")).then((e=>b(e.dbRes.routeLatLng))).catch((e=>S("/buses")));const e=l.Ay.connect(r.Gn,{extraHeaders:{Authorization:"Bearer ".concat((0,d.gf)()[2])}});e.on("connect",(()=>{e.emit("bus",N.get("id"))})),e.on("disconnect",(()=>{g(!1)})),e.on("joined",(e=>{g(!0)})),e.emit("location",N.get("id")),e.on("locationsent",(e=>{var s=JSON.parse(e);if(0!==Object.keys(s).length&&(t(s),s.lastGpsInformation)){let e=JSON.parse(s.lastGpsInformation);p({lat:e.latitude,lng:e.longitude})}})),"geolocation"in navigator?navigator.geolocation.getCurrentPosition((e=>{f([e.coords.latitude,e.coords.longitude])})):console.log("Geolocation is not available in your browser.");const s=setInterval((()=>{e.emit("location",N.get("id")),"geolocation"in navigator?navigator.geolocation.getCurrentPosition((e=>{f([e.coords.latitude,e.coords.longitude])})):console.log("Geolocation is not available in your browser.")}),5e3);return()=>{e.disconnect(),clearInterval(s)}}),[S,N]),(0,x.jsx)(o.A,{header:(0,x.jsx)(n.A,{title:e?e.routeName:"Loading..."}),style:"bg-white rounded-t-2xl",children:(0,x.jsxs)("div",{className:"flex flex-col md:p-2 ",children:[(0,x.jsxs)("div",{className:"flex flex-row flex-wrap gap-1 h-1/3 pt-4 pl-2 md:pl-5",children:[(0,x.jsxs)("p",{className:"text-black text-lg",children:[(0,x.jsx)("strong",{children:"Driver Contact: "}),e?e.driverContact:""]}),(0,x.jsxs)("p",{className:"text-black text-lg",children:[(0,x.jsx)("strong",{children:"Last Location: "}),e?JSON.parse(e.lastGpsInformation).address:""]}),(0,x.jsxs)("p",{className:"text-black text-lg",children:[(0,x.jsx)("strong",{children:"RTO: "}),e?e.vehicleRegistration:""]}),(0,x.jsxs)("p",{className:"text-black text-lg",children:[(0,x.jsx)("strong",{children:"State Of Bus: "}),e?JSON.parse(e.lastGpsInformation).statusStr:""]}),(0,x.jsxs)("p",{className:"text-black text-lg",children:[(0,x.jsx)("strong",{children:"Last Updated: "}),e?JSON.parse(e.lastGpsInformation).gpsTimeStr:""]}),u?"":(0,x.jsx)("p",{className:"text-sm",children:"Allow Location To See Your Location As Well."}),s?(0,x.jsx)("p",{className:"text-sm",children:"Status: Connected"}):(0,x.jsx)("p",{className:"text-sm",children:"Status: Disconnected"})]}),A?(0,x.jsx)(h.u6,{mapContainerStyle:{width:"100vw",height:"65vh"},center:m,zoom:10,onLoad:L,onUnmount:C,children:(0,x.jsx)(h.X0,{title:"".concat(e?e.vehicleRegistration:""),position:m})}):"Loading..."]})})}},366:(e,t,s)=>{e.exports=s.p+"static/media/logo.be2de1f8e694f3463c68.png"}}]);
//# sourceMappingURL=736.c71400b4.chunk.js.map