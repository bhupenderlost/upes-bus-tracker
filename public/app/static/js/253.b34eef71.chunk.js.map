{"version":3,"file":"static/js/253.b34eef71.chunk.js","mappings":"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","sources":["Components/BackButton/BackButton.jsx","Components/BottomBar/BottomBar.jsx","Components/Base/BaseTwo.jsx","Pages/Locations.jsx"],"sourcesContent":["import React from \"react\"\r\nimport { \r\n    ArrowLeftIcon\r\n} from '@heroicons/react/24/solid'\r\n\r\nimport { useNavigate } from \"react-router-dom\"\r\n\r\nconst BackButton = (props) => {\r\n\r\n    const navigate = useNavigate()\r\n    return(\r\n        <div className=\"mt-10 flex flex-row gap-2 ml-2\">\r\n            <div onClick={() => navigate(-1)} className=\"rounded-full bg-white h-[40px] w-[40px] flex flex-col items-center justify-center\">\r\n                <ArrowLeftIcon width={30} height={30}  />\r\n            </div>\r\n            <h2 className=\"text-white text-3xl font-bold\">\r\n                {props.title}\r\n            </h2>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default BackButton","import React from \"react\"\r\nimport { \r\n    HomeIcon, \r\n    TruckIcon, \r\n    UserIcon,\r\n    ArrowLeftEndOnRectangleIcon\r\n} from '@heroicons/react/24/solid'\r\nimport { useLocation, useNavigate } from \"react-router-dom\"\r\nimport { logout } from '../../Helpers/index'\r\n\r\nconst BottomBar = (props) => {\r\n\r\n    const location = useLocation()\r\n    const navigate = useNavigate()\r\n\r\n    const menuItems = [\r\n        {\r\n            title: 'Home',\r\n            icon: <HomeIcon width={30} height={30} className={location.pathname === '/home' ? 'text-black' : 'text-[#0000005f] '} />,\r\n            active: location.pathname === '/home' ? true : false,\r\n            href: '/home'\r\n        },\r\n        {\r\n            title: 'Buses',\r\n            icon: <TruckIcon width={30} height={30} className={location.pathname === '/buses' ? 'text-black' : 'text-[#0000005f]'} />,\r\n            active: location.pathname === '/buses' ? true : false,\r\n            href: '/buses'\r\n        },\r\n        {\r\n            title: 'Profile',\r\n            icon: <UserIcon width={30} height={30} className={location.pathname === '/profile' ? 'text-black' : 'text-[#0000005f]'} />,\r\n            active: location.pathname === '/profile' ? true : false,\r\n            href: '/profile'\r\n        },\r\n        {\r\n            title: 'All',\r\n            icon: <TruckIcon width={30} height={30} className={location.pathname === '/locations' ? 'text-black' : 'text-[#0000005f]'} />,\r\n            active: location.pathname === '/locations' ? true : false,\r\n            href: '/locations'\r\n        },\r\n        {\r\n            title: 'Logout',\r\n            icon: <ArrowLeftEndOnRectangleIcon width={30} height={30} className={location.pathname === '/logout' ? 'text-black' : 'text-[#0000005f]'} />,\r\n            active: location.pathname === '/logout' ? true : false,\r\n            href: '/logout'\r\n        },\r\n    ]\r\n\r\n    const signout = async () => {\r\n        let res = await logout()\r\n        if(res) {\r\n            return navigate('/login')\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"w-screen h-[10%] flex flex-row justify-center gap-12 border-t-2 border-gray-200 shadow\">\r\n            { menuItems.map((item) => {\r\n                return(\r\n                    <div \r\n                        onClick={item.href === '/logout' ? () => signout() : () => navigate(`${item.href}`)} \r\n                        key={item.href} \r\n                        className={`flex flex-col pt-2 items-center ${item.active ? 'border-t-4 border-[#e6106d]' : ''} rounded w-[40px]`}\r\n                    >\r\n                        {item.icon}\r\n                        <p className={item.active ? 'text-black font-semibold' : 'text-[#0000005f]'}>\r\n                            {item.title}\r\n                        </p>      \r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BottomBar","import React from \"react\"\r\nimport Logo from '../../Assets/Media/logo.png'\r\nimport BottomBar from \"../BottomBar/BottomBar\"\r\n\r\nconst BaseTwo = (props) => {\r\n    \r\n    return(\r\n        <div className=\"h-screen w-screen bg-[#0075a1] md:overflow-hidden\">\r\n            <div className=\"flex flex-row justify-between h-1/6 p-2\">\r\n                {props.header}\r\n                <div className=\"h-[40px] \">\r\n                    <img src={Logo} alt=\"UPES Logo\" className=\"h-[50px] -mt-[2px]\" />\r\n                </div>\r\n            </div>\r\n            <div className={`flex flex-col items-center drop-shadow-2xl h-5/6 ${props.style}`}>\r\n                <div className=\"overflow-y-scroll h-[90%]\">\r\n                    {props.children}\r\n                </div>\r\n                <BottomBar />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BaseTwo","import React, { useEffect, useState, useCallback } from \"react\"\r\nimport socketIO from 'socket.io-client'\r\nimport BaseTwo from \"../Components/Base/BaseTwo\"\r\nimport BackButton from \"../Components/BackButton/BackButton\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport config from '../config.json'\r\nimport { getToken } from '../Helpers/index'\r\nimport { GoogleMap, useJsApiLoader, MarkerF, InfoWindowF, InfoWindow } from \"@react-google-maps/api\"\r\n\r\n\r\nconst Locations = () => {\r\n\r\n  const [data, setData] = useState(null)\r\n  const [join, setJoin] = useState(false)\r\n  const [loading, setLoading] = useState(true)\r\n  const navigate = useNavigate()\r\n  const [position, setPosition] = useState({ lat: 30.3165, lng: 78.0322 })\r\n  const [userPosition, setUserPosition] = useState(null)\r\n  const [selected, setSelected] = useState(null)\r\n  const [map, setMap] = useState(null)\r\n\r\n  const { isLoaded } = useJsApiLoader({\r\n    id: \"google-map-script\",\r\n    googleMapsApiKey: config.GOOGLE_MAPS_API_KEY\r\n  })\r\n  const mapContainerStyle = {\r\n    width: \"100vw\",\r\n    height: \"75vh\",\r\n  }\r\n\r\n  const center = {\r\n    lat: 30.3165,\r\n    lng: 78.0322,\r\n  }\r\n  const onLoad = useCallback((map) => {\r\n    const bounds = new window.google.maps.LatLngBounds(center)\r\n    map.fitBounds(bounds)\r\n    setMap(map)\r\n  }, [])\r\n\r\n  const onUnmount = useCallback((map) => {\r\n    setMap(null)\r\n  }, [])\r\n  useEffect(() => {\r\n    const URL = `${window.location.protocol}//${window.location.hostname}/`\r\n\r\n    const socket = socketIO.connect(URL, {\r\n      extraHeaders: {\r\n        'Authorization': `Bearer ${getToken()[2]}`\r\n      }\r\n    })\r\n    socket.on('connect', () => {\r\n      socket.emit('all', '')\r\n    })\r\n    socket.on(\"disconnect\", () => {\r\n      setJoin(false)\r\n    })\r\n    socket.on('joined', (data) => {\r\n      setJoin(true)\r\n      socket.emit(\"all-location\", '')\r\n    })\r\n\r\n    socket.on('location-all', (data) => {\r\n      if (Array.isArray(data)) {\r\n        setData(data)\r\n        setLoading(false)\r\n      }\r\n    })\r\n    if (\"geolocation\" in navigator) {\r\n      navigator.geolocation.watchPosition((position) => {\r\n        setUserPosition([position.coords.latitude, position.coords.longitude]);\r\n      })\r\n    } else {\r\n      console.log(\"Geolocation is not available in your browser.\")\r\n    }\r\n    const interval = setInterval(() => {\r\n      socket.emit('all-location', '')\r\n    }, 5000)\r\n    return () => {\r\n      socket.disconnect()\r\n      clearInterval(interval)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <BaseTwo header={<BackButton title={data ? \"All Buses\" : 'Loading...'} />} style=\"bg-white rounded-t-2xl\">\r\n      {\r\n        isLoaded ? (\r\n          <GoogleMap\r\n            mapContainerStyle={mapContainerStyle}\r\n            center={center}\r\n            zoom={10}\r\n            onLoad={onLoad}\r\n            onUnmount={onUnmount}\r\n          >\r\n            <MarkerF\r\n              position={position}\r\n            />\r\n            {!data ? '' :\r\n              data.map((item) => {\r\n                let bus = JSON.parse(item)\r\n                let gpsData = JSON.parse(bus.lastGpsInformation)\r\n                return (\r\n                  <MarkerF\r\n                    key={bus._id}\r\n                    position={gpsData ? { lat: gpsData.latitude, lng: gpsData.longitude } : { lat: 0, lng: 0 }}\r\n                    onClick={() => {\r\n                      setSelected(bus)\r\n                      setPosition({ lat: gpsData.latitude, lng: gpsData.longitude })\r\n                    }}\r\n                  />\r\n                )\r\n              })\r\n            }\r\n            {selected && (\r\n              <InfoWindowF\r\n                \r\n                onCloseClick={() => {\r\n                  setSelected(null);\r\n                }}\r\n                position={{\r\n                  lat: position.lat,\r\n                  lng: position.lng\r\n                }}\r\n              >\r\n                <div>\r\n                  Route: { selected.routeName } <br/>\r\n                  Driver Contact: { selected.driverContact} <br/>\r\n                  RTO: { selected.vehicleRegistration}\r\n                </div>\r\n              </InfoWindowF>\r\n            )}\r\n          </GoogleMap>\r\n        ) :\r\n\r\n          \"Loading...\"\r\n      }\r\n    </BaseTwo>\r\n  );\r\n}\r\n\r\nexport default Locations"],"names":["props","navigate","useNavigate","_jsxs","className","children","_jsx","onClick","ArrowLeftIcon","width","height","title","location","useLocation","menuItems","icon","HomeIcon","pathname","active","href","TruckIcon","UserIcon","ArrowLeftEndOnRectangleIcon","map","item","async","logout","signout","concat","header","src","Logo","alt","style","BottomBar","Locations","data","setData","useState","join","setJoin","loading","setLoading","position","setPosition","lat","lng","userPosition","setUserPosition","selected","setSelected","setMap","isLoaded","useJsApiLoader","id","googleMapsApiKey","config","center","onLoad","useCallback","bounds","window","google","maps","LatLngBounds","fitBounds","onUnmount","useEffect","URL","protocol","hostname","socket","socketIO","extraHeaders","getToken","on","emit","Array","isArray","navigator","geolocation","watchPosition","coords","latitude","longitude","console","log","interval","setInterval","disconnect","clearInterval","BaseTwo","BackButton","GoogleMap","mapContainerStyle","zoom","MarkerF","bus","JSON","parse","gpsData","lastGpsInformation","_id","InfoWindowF","onCloseClick","routeName","driverContact","vehicleRegistration"],"sourceRoot":""}